/** * Created by pengyao on 16/6/05. */import React from "react";import jQuery from "jquery";import {sendCode,resetPassword} from "../lib/client";const mtStyle = {    marginTop:20}export default class ResetPassword extends React.Component{    constructor(props) {        super(props);        this.state = {}    }    handleChange(name,e) {        this.state[name] = e.target.value;    }    handlemailCode(e){        var $btn = jQuery(e.target);        $btn.button("loading");        sendCode(this.state.email)            .then(ret=>{                this.setState({send:true});                $btn.button("reset");                alert('已经发送验证码到你的邮箱，请登录邮箱查收，并在当前页面输入该验证码');            })            .catch(err=>{                $btn.button("reset");                alert(err);            });    }    handleReset(e) {        var $btn = jQuery(e.target);        $btn.button("loading");        resetPassword(this.state.code,this.state.email,this.state.password)            .then(ret=>{                $btn.button("reset");                alert("修改成功");                location = 'login';            })            .catch(err=>{                $btn.button("reset");                alert(err);            })    }    render(){        return (        <div className="panel panel-primary">            <div className="panel-heading">重置密码</div>            <div className="panel-body">                <form className="form-horizontal">                    <div className="form-group">                        <label htmlFor="email" className="col-sm-2 control-label">邮箱</label>                        <div className="col-sm-10">                            <input type="text" className="form-control" id="email" placeholder="邮箱" onChange={this.handleChange.bind(this,'email')}/>                        </div>                    </div>                    <div className="form-group">                        <div className="col-sm-10 col-sm-offset-2">                            <button type="button" className="btn btn-primary" onClick={this.handlemailCode.bind(this)}>发送邮箱验证码</button>                        </div>                    </div>                    {this.state.send?                    <div>                        <div className="form-group">                            <label htmlFor="code" className="col-sm-2 control-label">验证码</label>                            <div className="col-sm-10">                                <input type="text" className="form-control" id="code" placeholder="密码" onChange={this.handleChange.bind(this,'code')}/>                            </div>                        </div>                        <div className="form-group">                            <label htmlFor="password" className="col-sm-2 control-label">新密码</label>                            <div className="col-sm-10">                                <input type="password" className="form-control" id="password" placeholder="新密码" onChange={this.handleChange.bind(this,'password')}/>                            </div>                        </div>                        <div className="form-group">                            <div className="col-sm-offset-2 col-sm-10">                                <button type="button" className="btn btn-primary" onClick={this.handleReset.bind(this)}>修改</button>                            </div>                        </div>                    </div>:null}                </form>            </div>        </div>        )    }}